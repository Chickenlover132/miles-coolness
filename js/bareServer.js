window.__init||(window.__init=!0,window.connectBare=async function(e){if(!document.querySelector(".server-name"))return;const t=await fetch("https://"+e),r=await t.json(),n=await caches.open("astro-data");return await n.put("/bare.txt",new Response(e)),localStorage.server=e,document.cookie="astro-bare="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT",window.server=[e,r],e},window.requestBare=async function(e=!1){if(!document.querySelector(".server-name"))return;const t=await fetch("/bare.json"),r=await t.json(),n={};for await(var o of(r.forEach((e=>n[e]=0)),r)){const e=new Date,t=await fetch("https://"+o);await t.json(),n[o]=new Date-e}if(r.forEach((e=>setTimeout((function(){document.querySelector("#server-"+e.split(".")[0]+" .server-ping").innerText=n[e]+"ms"}),1e3))),!e)if(!localStorage.server&&navigator.onLine){const e=Object.entries(n).sort(((e,t)=>e[1]-t[1]));window.server=e[0],localStorage.server=e[0][0];const t=await caches.open("astro-data");await t.put("/bare.txt",new Response(e[0][0])),document.cookie="astro-bare="+e[0][0]+"; expires=Fri, 31 Dec 9999 23:59:59 GMT",document.querySelector(".server-name").innerText=e[0][0].split(".")[0].toUpperCase(),document.querySelector(".server-indicator-value").childNodes[1].textContent="Connected ",document.querySelector(".server-indicator-value").classList.add("connected")}else window.server=[localStorage.server,0],document.querySelector(".server-name").innerText=localStorage.server.split(".")[0].toUpperCase(),document.querySelector(".server-indicator-value").childNodes[1].textContent="Connected ",document.querySelector(".server-indicator-value").classList.add("connected")},navigator.onLine?requestBare():document.querySelector(".server-indicator-value")&&(document.querySelector(".server-indicator-value").childNodes[1].textContent="Offline"),addEventListener("router:end",(()=>requestBare())),addEventListener("offline",(function(){document.querySelector(".server-name").innerText="",document.querySelector(".server-indicator-value").childNodes[1].textContent="Offline",document.querySelector(".server-indicator-value").classList.remove("connected")})),addEventListener("online",(function(){document.querySelector(".server-indicator-value").childNodes[1].textContent="Connecting...",requestBare()})));